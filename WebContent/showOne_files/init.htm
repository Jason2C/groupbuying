var AMap={Align:{TOP_CENTER:1,BOTTOM_CENTER:2},Conf:{_version:"1.0-0405",_key:"",_server:"http://api.amap.com:9090/",_client:"http://api.amap.com/webapi/static/",_plugin:"http://api.amap.com/webapi/plugin",_count:"http://api.amap.com/webapi/count",center:{lng:116.3977713227539,lat:39.92358105898725,_type:"lnglat"},level:13,zooms:[3,18],mapUrl:"http://emap{0,1,2,3}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]",dragEnable:!0,zoomEnable:!0,keyboardEnable:!0,jogEnable:!0,doubleClickZoom:!0,continuousZoomEnable:!0,
scrollWheel:!0,_copyright:'<a href="http://api.amap.com" target="_blank">Amap</a> &copy;\u9ad8\u5fb7\u8f6f\u4ef6 AutoNavi'},Class:function(){for(var a=function(){arguments&&arguments[0]!=AMap.Class.isPrototype&&this.initialize.apply(this,arguments)},b={},c,d=0,e=arguments.length;d<e;++d)"function"==typeof arguments[d]?(0==d&&1<e&&(c=arguments[d].prototype.initialize,arguments[d].prototype.initialize=function(){},b=new arguments[d],void 0===c?delete arguments[d].prototype.initialize:arguments[d].prototype.initialize=
c),c=arguments[d].prototype):c=arguments[d],AMap.extend(b,c);a.prototype=b;return a}};AMap.Class.isPrototype=function(){};AMap.extend=function(a,b){a=a||{};if(b){for(var c in b){var d=b[c];void 0!==d&&(a[c]=d)}!("function"==typeof window.Event&&b instanceof window.Event)&&b.hasOwnProperty&&b.hasOwnProperty("toString")&&(a.toString=b.toString)}return a};
AMap.Control={left:10,top:10,minZoom:0,maxZoom:19,_initControl:function(){this.minZoom=this.zooms[0];this.maxZoom=this.zooms[1];var a=[];a.push('<div style="width:6px;height:4px;overflow:hidden;border-right:#F00 solid 2px;border-bottom:#F00 solid 2px;position:absolute;left:0;top:0;"></div>');a.push('<div style="width:6px;height:4px;overflow:hidden;border-left:#F00 solid 2px;border-bottom:#F00 solid 2px;position:absolute;left:100px;top:0;"></div>');a.push('<div style="width:6px;height:4px;overflow:hidden;border-top:#F00 solid 2px;border-left:#F00 solid 2px;position:absolute;left:100px;top:67px;"></div>');
a.push('<div style="width:6px;height:4px;overflow:hidden;border-top:#F00 solid 2px;border-right:#F00 solid 2px;position:absolute;left:0;top:67px;"></div>');AMap.$("_frame_"+this._unique).innerHTML=a.join("")},_frame:function(a){var b=AMap.$("_frame_"+this._unique);if(5>this._mouse.x||5>this._mouse.y||this._mouse.x>this.width-5||this._mouse.y>this.height-5||!1==this._mouse.In)this._mouse.x=this.width/2,this._mouse.y=this.height/2;b.style.left=this._mouse.x-54+"px";b.style.top=this._mouse.y-36.5+"px";
var c=0,d=this;window.clearInterval(d._timer.frame);this._timer.frame=0<a?setInterval(function(){var a=9.5*(4-c),f=5.75*(4-c);b.children[2].style.left=a+"px";b.children[2].style.top=f+"px";b.children[3].style.left=108-a-9+"px";b.children[3].style.top=f+"px";b.children[0].style.left=108-a-9+"px";b.children[0].style.top=63-f+"px";b.children[1].style.left=a+"px";b.children[1].style.top=63-f+"px";5<=c?(window.clearInterval(d._timer.frame),b.style.display="none"):b.style.display="block";c++},80):setInterval(function(){var a=
9.5*c,f=5.375*c;b.children[0].style.left=a+"px";b.children[0].style.top=f+"px";b.children[1].style.left=99-a+"px";b.children[1].style.top=f+"px";b.children[2].style.left=99-a+"px";b.children[2].style.top=64-f+"px";b.children[3].style.left=a+"px";b.children[3].style.top=64-f+"px";5<=c?(window.clearInterval(d._timer.frame),b.style.display="none"):b.style.display="block";c++},120)}};
AMap.Event={isIE:/msie/i.test(navigator.userAgent),isIE6:/msie 6.0/i.test(navigator.userAgent),isIE9:/msie 9.0/i.test(navigator.userAgent),isWebkit:/webkit/i.test(navigator.userAgent),isGecko:/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),isOpera:/opera/i.test(navigator.userAgent),addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},removeEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,
c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null},formatEvent:function(a){this.isIE&&(a.charCode="keypress"==a.type?a.keyCode:0,a.eventPhase=2,a.isChar=0<a.charCode,a.pageX=a.clientX+document.body.scrollLeft,a.pageY=a.clientY+document.body.scrollTop,a.preventDefault=function(){this.returnValue=!1},"mouseout"==a.type?a.relatedTarget=a.toElement:"mouseover"==a.type&&(a.relatedTarget=a.fromElement),a.stopPropagation=function(){this.cancelBubble=true},a.target=a.srcElement,a.time=(new Date).getTime());
this.isGecko&&(a.offsetX=a.layerX,a.offsetY=a.layerY);a.wheelDelta&&(a.detail=a.wheelDelta);return a},stopPropagation:function(a){a.stopPropagation?(a.stopPropagation(),a.preventDefault()):(a.cancelBubble=!0,a.returnValue=!1)},drag:function(a,b,c,d){function e(a){a=a||window.event;c(a)}xEvent=this;xEvent.addEvent(a,"mousedown",function(a){xEvent.container.style.cursor="url("+xEvent._client+"Images/closedhand.cur),pointer";a=a||window.event;b(a);xEvent.addEvent(document,"mousemove",e);xEvent.addEvent(document,
"mouseup",function(a){a=a||window.event;d(a);xEvent.removeEvent(document,"mousemove",e);xEvent.removeEvent(document,"mouseup",arguments.callee);xEvent.container.style.cursor="default"==xEvent._cursor.map?xEvent._cursor.map:"url("+xEvent._cursor.map+"),pointer"})})},mousewheel:function(a,b){var c=function(a){a=a||window.event;a.wheelDelta?a.delta=a.wheelDelta/120:a.detail&&(a.delta=-a.detail/3);b(a)};document.addEventListener&&a.addEventListener("DOMMouseScroll",c,!1);a.onmousewheel=c},_trigger:function(a,
b,c){c=c||{};c.mapId=this._unique;c.overlay=a._type;this._event[a._type]||(this._event[a._type]=[]);for(var d=0;d<this._event[a._type].length;d++)this._event[a._type][d].name==b&&this._event[a._type][d].obj==a&&this._event[a._type][d].func(c)}};
AMap.Interface={getCenter:function(){return this.center},getZoom:function(){return this.level},getZooms:function(){return this.zooms},getSize:function(){return{width:this.width,height:this.height}},getBounds:function(){return{southwest:this._layer2lnglat({x:0,y:this.height}),northeast:this._layer2lnglat({x:this.width,y:0})}},getTiles:function(){return this._tile.join(",").split(",")},getStatus:function(){for(var a="dragEnable,zoomEnable,keyboardEnable,jogEnable,continuousZoomEnable,doubleClickZoom,scrollWheel".split(","),
b={},c=0;c<a.length;c++)b[a[c]]=this[a[c]];return b},getResolution:function(){return 6378137*2*Math.cos(this.center.lat*Math.PI/180)*Math.PI/(256*Math.pow(2,this.level))},getScale:function(a){a||(a=96);parseInt(a)||AMap.Util.error("Map.getScale","\u53c2\u6570\u5e94\u4e3a\u6570\u5b57");return parseInt(this.getResolution()*a/0.0254)},getDefaultCursor:function(){return this._cursor.map},setCenter:function(a){(!a||"lnglat"!=a._type)&&AMap.Util.error("Map.setCenter","\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42");
this.center=a;this._zoom()},setCity:function(a){a||AMap.Util.error("Map.setCity","\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a");var a=AMap.Conf._server+"gss/simple?sid=1026&resType=json&encode=utf-8&keyword="+encodeURI(a),b=this;new AMap.AjaxRequest(a,function(a){a.status&&0<a.list.length&&b.setZoomAndCenter(a.list[0].level,new AMap.LngLat(a.list[0].x,a.list[0].y))})},setZoom:function(a){parseInt(a)||AMap.Util.error("Map.setZoom","\u53c2\u6570\u5e94\u4e3a\u6570\u5b57");this._zoom(a)},zoomIn:function(){this._zoom("+")},
zoomOut:function(){this._zoom("-")},setZoomAndCenter:function(a,b){this._mouse.In=!1;this.center=b;this.setZoom(a)},setBounds:function(a){if(-180>=parseFloat(a.southwest.lng)||180<=parseFloat(a.northeast.lng)||-85.051128>=parseFloat(a.southwest.lat)||85.051128<=parseFloat(a.northeast.lat))return!1;var b=this.getDistance({lng:a.southwest.lng,lat:a.northeast.lat},a.northeast)/this.width,c=this.getDistance({lng:a.northeast.lng,lat:a.southwest.lat},a.northeast)/this.height,b=b>c?b:c,a={lng:(parseFloat(a.northeast.lng)+
parseFloat(a.southwest.lng))/2,lat:(parseFloat(a.northeast.lat)+parseFloat(a.southwest.lat))/2},b=Math.floor(Math.LOG2E*Math.log(6378137*2*Math.cos(a.lat*Math.PI/180)*Math.PI/b/256));this.level==b?this.setCenter(a):this.setZoomAndCenter(b,a)},setStatus:function(a){a||AMap.Util.error("Map.setStatus","\u53c2\u6570\u4e0d\u7b26\u5408\u5b9e\u9645\u60c5\u51b5");var b="dragEnable,zoomEnable,keyboardEnable,jogEnable,continuousZoomEnable,doubleClickZoom,scrollWheel".split(","),c;for(c in a)"boolean"==typeof a[c]&&
-1!=b.join(",").indexOf[c]&&void 0!=this[c]&&(this[c]=a[c])},panTo:function(a){a||AMap.Util.error("Map.panTo","\u53c2\u6570\u4e0d\u5b58\u5728");var b=this._lnglat2pixel(this.getCenter(),this.level),a=this._lnglat2pixel(a,this.level);this._panBy(b.x-a.x,b.y-a.y)},panBy:function(a,b){this._panBy(a,b)},clearMap:function(){this.clearbind();this.clearOverlays();this.clearInfoWindow();for(var a=1;a<this._layers.length;a++){var b=AMap.$("_lay_"+this._unique+"_"+this._layers[a].id);b.parentNode.removeChild(b);
this._layers.splice(a,1)}},destroy:function(){for(var a=this.container,b=a.getElementsByTagName("*");0<b.length;)a.removeChild(b[0])},setDefaultCursor:function(a){this._cursor.map=a?a:"default";this.container.style.cursor="default"==this._cursor.map?"default":"url("+a+"),pointer"},addLayer:function(a){(!a||"tilelayer"!=a._type)&&AMap.Util.error("Map.addLayer","\u53c2\u6570\u4e0d\u7b26\u5408\u5b9e\u9645\u60c5\u51b5");this._addLayer(a)},getLayer:function(a){for(var b=0;b<this._layers.length;b++)if(a==
this._layers[b].id)return this._layers[b];return!1},removeLayer:function(a){this._removeLayer(a)},addOverlays:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this._addOverlay(a[b]);else this._addOverlay(a);return!0},getOverlays:function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)this._overlays[a[c]]&&b.push(this._overlays[a[c]]);return b}return this._overlays[a]?this._overlays[a]:!1},getOverlaysByType:function(a){var b=[];for(id in this._overlays)this._overlays[id]._type==
a&&b.push(this._overlays[id]);return b},updateOverlay:function(a){this.addOverlays(a)},removeOverlays:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this._removeOverlay(a[b]);else this._removeOverlay(a)},clearOverlays:function(){for(var a in this._overlays)this._overlays[a].stopMove&&this._overlays[a].stopMove(),this._removeOverlay(this._overlays[a].id)},clearOverlaysByType:function(a){for(id in this._overlays)this._overlays[id]._type==a&&this.removeOverlays(id)},setFitView:function(a){var b,
c,d,e;function f(a){b=a.lng<b?a.lng:b;c=a.lat<c?a.lat:c;d=a.lng>d?a.lng:d;e=a.lat>e?a.lat:e}ove=this._overlays;a&&(ove=this.getOverlays(a));b=180;c=90;e=d=0;for(var g in ove)if("marker"==ove[g]._type)f(ove[g].position);else if("circle"==ove[g]._type)this._getLngLatByOffset(ove[g].center,-ove[g].radius,-ove[g].radius),f(this.getLngLatByOffset(ove[g].center,-ove[g].radius,-ove[g].radius)),this._getLngLatByOffset(ove[g].center,ove[g].radius,ove[g].radius),f(this.getLngLatByOffset(ove[g].center,ove[g].radius,
ove[g].radius));else for(var a=ove[g].path,h=0;h<a.length;h++)f(a[h]);this.setBounds({southwest:{lng:b,lat:c},northeast:{lng:d,lat:e}})},openInfoWindow:function(a,b){var c=this._overlays[a];if(!c)return!1;"marker"==c._type||"circle"==c._type?b.open(this,c.position):("polyline"==c._type||"polygon"==c._type)&&b.open(this,c.path[0])},setMouseTool:function(a,b){var b=b||{},c=this;if(-1<"marker,polyline,circle,rule,rectZoomIn,rectZoomOut,polygon,rectangle,measureArea,panWheelZoom,exit".indexOf(a))if(this._mousetool)this._mousetool["_"+
a](b);else this.plugin("AMap.Mouse",function(){c._mousetool=new AMap.Mouse(c);c._mousetool["_"+a](b)})},bind:function(a,b,c,d){d||(d="default");this._event[a._type]||(this._event[a._type]=[]);this._event[a._type].push({obj:a,name:b,func:c,cate:d});return!0},unbind:function(a,b,c){if(void 0!=a&&void 0!=b&&void 0!=c)for(var d=0;d<this._event[a._type].length;d++)if(this._event[a._type][d].obj==a&&this._event[a._type][d].name==b&&this._event[a._type][d].func.toString()==c.toString())return this._event[a._type].splice(d,
1),!0;return!1},clearbind:function(a){a||(a="default");for(var b in this._event)for(var c=this._event[b],d=0;d<c.length;d++)"system"!=c[d].cate&&c[d].cate==a&&(c.splice(d,1),d--)},trigger:function(a,b,c){this._trigger(a,b,c)},getLngLatByOffset:function(a,b,c){(!a||"lnglat"!=a._type)&&AMap.Util.error("Map.getLngLatByOffset","\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42");return this._getLngLatByOffset(a,b,c)},getDistance:function(a,b){(!a||"lnglat"!=a._type)&&AMap.Util.error("Map.getDistance","\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42");
(!b||"lnglat"!=b._type)&&AMap.Util.error("Map.getDistance","\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42");return this._getDistance(a,b)},lnglatToPixel:function(a,b){return this._lnglat2pixel(a,b)},pixelToLngLat:function(a,b){return this._pixel2lnglat(a,b)},addControl:function(a){if(a&&"object"==typeof a){var b=AMap.$("_mc_"+this._unique);a._getHtmlDom&&(a._dom=a._getHtmlDom(this));b.parentNode.appendChild(a._dom);a._trigger&&a._trigger()}},removeControl:function(a){a=a._dom;a.parentNode.removeChild(a)},
plugin:function(a,b){"string"==typeof a&&(a=[a]);for(var c=0;c<a.length;c++){try{eval("new "+eval(a[c]))}catch(d){continue}a.splice(c,1);c--}0==a.length?b():(a=a.join(","),new AMap.AjaxRequest(this._plugin+"?cls="+a,b,!0))}};
AMap.Layerset=AMap.Class({_initLayer:function(){this._layers=[];this._tile=[];this._mouse={In:!1,x:0,y:0};this._timer={lay:0,alpha:0,frame:0,drag:0};if(this.level<this.zooms[0]||this.level>this.zooms[1])this.level=this.zooms[1];this.pixel=this._lnglat2pixel(this.center,this.level);this._relative={x:this.pixel.x-Math.round(this.width/2),y:this.pixel.y-Math.round(this.height/2)};this.northwest={x:0,y:0};this.southeast={x:this.width,y:this.height};this._mouse={In:!1,x:this.width/2,y:this.height/2,lnglat:this.center};
this._bindMap();this._addLayer(this.defaultTileLayer)},_addLayer:function(a){for(var b=0,c=0;c<this._layers.length;c++)if(a.id==this._layers[c].id){b=1;break}if(AMap.$("_lay_"+this._unique+"_"+a.id)&&1==b){b=AMap.$("_lay_"+this._unique+"_"+a.id);for(c=b.getElementsByTagName("img");0<c.length;)b.removeChild(c[0])}else c=document.createElement("div"),c.id="_lay_"+this._unique+"_"+a.id,c.style.cssText="position:absolute;left:0;top:0;width:100%;z-index:0;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;",
c.unselectable="on",AMap.$("_mc_"+this._unique).children[0].appendChild(c),0==b&&this._layers.push(a);this._addTile(a)},_addTile:function(a){this._tc=0;var b=Math.pow(2,this.level);this.northwest=AMap.extend(this.northwest,this._getTileNum(this.northwest,this._relative));this.southeast=AMap.extend(this.southeast,this._getTileNum(this.southeast,this._relative));for(var c=AMap.$("_lay_"+this._unique+"_"+a.id),d=document.createDocumentFragment(),e=this.northwest.line;e<=this.southeast.line;e++)for(var f=
this.northwest.column;f<=this.southeast.column;f++)if(0<=e&&e<b){var g=document.createElement("img");g.className="css-3d-bug-fix-hack";g.style.cssText="width:256px;height:256px;position:absolute;border:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;";g.style.top=256*e-this._relative.y+"px";g.style.left=256*f-this._relative.x+"px";g.unselectable="on";g.src=a.getTileUrl(f,e,this.level);1!=a.opacity&&(this.isIE?g.style.filter="alpha(opacity="+100*a.opacity+")":g.style.opacity=
a.opacity);d.appendChild(g);-1==this._tile.join(",").indexOf(f+"."+e)&&this._tile.push(f+"."+e);this._tileComplete(g)}c.appendChild(d)},_tc:0,_tileComplete:function(a){if(!this.isIE||this.isIE9)a.style.visibility="hidden",a.complete?a.style.visibility="visible":a.onload=function(a){a.target.style.visibility="visible"}},_moveTile:function(){var a=Math.pow(2,this.level);this.northwest=AMap.extend(this.northwest,this._getTileNum(this.northwest,this._relative));this.southeast=AMap.extend(this.southeast,
this._getTileNum(this.southeast,this._relative));for(var b=[],c=this.northwest.line;c<=this.southeast.line;c++)for(var d=this.northwest.column;d<=this.southeast.column;d++)if(0<=c&&c<a){if(-1==this._tile.join(",").indexOf(d+"."+c)){for(var e=0;e<this._layers.length;e++){var f=document.createElement("img");f.className="css-3d-bug-fix-hack";f.style.cssText="width:256px;height:256px;position:absolute;border:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;";f.style.top=256*c-
this._relative.y+"px";f.style.left=256*d-this._relative.x+"px";f.unselectable="on";f.src=this._layers[e].getTileUrl(d,c,this.level);1!=this._layers[e].opacity&&(this.isIE?f.style.filter="alpha(opacity="+100*this._layers[e].opacity+")":f.style.opacity=this._layers[e].opacity);AMap.$("_lay_"+this._unique+"_"+this._layers[e].id).appendChild(f);this._tileComplete(f)}this._tile.push(d+"."+c)}b.push(d+"."+c)}b=b.join(",");for(e=0;e<this._tile.length;e++)if(-1==b.indexOf(this._tile[e])){for(a=0;a<this._layers.length;a++)c=
AMap.$("_lay_"+this._unique+"_"+this._layers[a].id),d=c.getElementsByTagName("img"),c.removeChild(d[e]);this._tile.splice(e,1);e--}},_reloadLayer:function(){this.pixel=this._lnglat2pixel(this.center,this.level);this._relative={x:this.pixel.x-Math.round(this.width/2),y:this.pixel.y-Math.round(this.height/2)};var a=AMap.$("_mc_"+this._unique).children[0];a.style.left="0px";a.style.top="0px";this._lays={x:0,y:0};this.northwest={x:0,y:0};this.southeast={x:this.width,y:this.height};this._tile=[];for(a=
this._layers.length-1;0<=a;a--){for(var b=AMap.$("_lay_"+this._unique+"_"+this._layers[a].id),c=b.getElementsByTagName("img");0<c.length;)b.removeChild(c[0]);this._addTile(this._layers[a])}},_removeLayer:function(a){for(var b=0;b<this._layers.length;b++)if(a==this._layers[b].id){var c=AMap.$("_lay_"+this._unique+"_"+this._layers[b].id);c.parentNode.removeChild(c);this._layers.splice(b,1)}return!0},_lnglat2pixel:function(a,b){var c=Math.sin(a.lat*Math.PI/180),d=256*((a.lng+180)/360)*Math.pow(2,b),
c=256*(0.5-Math.log((1+c)/(1-c))/(4*Math.PI))*Math.pow(2,b);return{x:Math.round(d),y:Math.round(c),_type:"pixel"}},_pixel2lnglat:function(a,b){var c=Math.exp(4*Math.PI*(0.5-a.y/256/Math.pow(2,b))),d=360*(a.x/256/Math.pow(2,b))-180,c=180*(Math.asin((c-1)/(c+1))/Math.PI);return{lng:d,lat:c,_type:"lnglat"}},_getTileNum:function(a,b){return{line:Math.floor((a.y+b.y)/256),column:Math.floor((a.x+b.x)/256)}},_getOffset:function(a){var a=this.formatEvent(a),b={x:a.offsetX,y:a.offsetY},c=a.target,d=-1<"svg,path,circle,".indexOf(a.target.nodeName);
this.isOpera&&-1<["path","circle"].indexOf(a.target.nodeName)?(a=this._lnglat2pixel(this._overlays[a.target.id]._northwest,this.level),b.x+=a.x-this._relative.x,b.y+=a.y-this._relative.y):d&&!this.isIE9&&("svg"!=a.target.nodeName&&(c=c.parentNode),b.x=parseInt(c.style.left)+a.offsetX,b.y=parseInt(c.style.top)+a.offsetY,c=c.parentNode);try{for(;c&&"mc_"!=c.className;)b.x+=c.offsetLeft||0,b.y+=c.offsetTop||0,c=c.offsetParent}catch(e){}finally{return c||(b.x+=this._lays.x,b.y+=this._lays.y),b}},_bindMap:function(){var a=
AMap.$("_mc_"+this._unique),b=0,c=0,d=0,e=0,f=this,g=0,h=0,j=0;this.drag(a.children[0],function(a){window.clearInterval(f._timer.drag);b=d=parseInt(a.clientX);c=e=parseInt(a.clientY);g=(new Date).getTime();a.lnglat=f._mouse.lnglat;f._trigger(f,"dragstart",a);f.stopPropagation(a)},function(a){f.dragEnable&&f._panBy(a.clientX-b,a.clientY-c);b=a.clientX;c=a.clientY;a.lnglat=f._mouse.lnglat;f._trigger(f,"dragging",a);window.clearTimeout(j);j=setTimeout(function(){h=0},50);h=1},function(a){a.lnglat=f._mouse.lnglat;
if(f.dragEnable&&f.jogEnable&&1==h){g=(new Date).getTime()-g;d=a.clientX-d;e=a.clientY-e;var b=Math.sqrt(Math.pow(d,2)+Math.pow(e,2));if(0.0020<2*b/Math.pow(g,2)){window.clearInterval(f._timer.drag);var c=0;f._timer.drag=setInterval(function(){var a=AMap.Tween.Cubic.easeOut(c,0,b/2,10)-AMap.Tween.Cubic.easeOut(c-1,0,b/2,10);f._panBy(Math.round(d/b*a),Math.round(e/b*a));10<=c&&(window.clearInterval(f._timer.drag),f._timer.drag=0,f._trigger(f,"dragend"));c++},40)}else 0!=b&&f._trigger(f,"dragend",a)}else 0!=
a.clientX-d&&0!=a.clientY-e&&f._trigger(f,"dragend",a)});this.addEvent(a,"dblclick",function(a){f.doubleClickZoom&&f.level<f.zooms[1]&&f._zoom("+");var b=f._getOffset(a);a.lnglat=f._layer2lnglat(b);f._trigger(f,"dblclick",a);f.stopPropagation(a)});this.mousewheel(a,function(a){f.scrollWheel&&(0<a.delta?f.level<f.maxZoom&&f._zoom("+"):f.level>f.minZoom&&f._zoom("-"));f._trigger(f,"mousewheel",a);f.stopPropagation(a)});this.isIE?(this.addEvent(a,"mouseenter",function(a){f._mouse.In=!0;var b=f._getOffset(a);
a.lnglat=f._layer2lnglat(b);f._trigger(f,"mouseover",a)}),this.addEvent(a,"mouseleave",function(a){f._mouse.In=!1;var b=f._getOffset(a);a.lnglat=f._layer2lnglat(b);f._trigger(f,"mouseout",a)})):(this.addEvent(a,"mouseover",function(a){var b=a.relatedTarget;b&&!(b.compareDocumentPosition(this)&8)&&(f._mouse.In=!0,b=f._getOffset(a),a.lnglat=f._layer2lnglat(b),f._trigger(f,"mouseover",a))}),this.addEvent(a,"mouseout",function(a){var b=a.relatedTarget;b&&!(b.compareDocumentPosition(this)&8)&&(f._mouse.In=
!1,b=f._getOffset(a),a.lnglat=f._layer2lnglat(b),f._trigger(f,"mouseout",a))}));this.addEvent(a,"mousedown",function(a){var b=f._getOffset(a);a.lnglat=f._layer2lnglat(b);f._trigger(f,"mousedown",a)});this.addEvent(a,"mouseup",function(a){var b=f._getOffset(a);a.lnglat=f._layer2lnglat(b);f._trigger(f,"mouseup",a)});this.addEvent(a,"click",function(a){var b=f._getOffset(a);a.lnglat=f._layer2lnglat(b);f._trigger(f,"click",a)});this.addEvent(a,"mousemove",function(a){a.pixel=f._getOffset(a);a.lnglat=
f._layer2lnglat(a.pixel);a.tile=f._getTileNum(f._lnglat2pixel(a.lnglat,f.level),{x:0,y:0});f._mouse={x:a.pixel.x,y:a.pixel.y,In:true,lnglat:a.lnglat};f._trigger(f,"mousemove",a)});this.addEvent(a,"contextmenu",function(a){f.stopPropagation(a);var b=f._getOffset(a);a.lnglat=f._layer2lnglat(b);f._trigger(f,"rightclick",a)});this.addEvent(document,"keydown",function(a){if(f._mouse.In&&f.keyboardEnable)switch(a.keyCode){case 107:f._zoom("+");f.stopPropagation(a);break;case 109:f._zoom("-");f.stopPropagation(a);
break;case 37:f.panBy(5,0);f.stopPropagation(a);break;case 38:f.panBy(0,5);f.stopPropagation(a);break;case 39:f.panBy(-5,0);f.stopPropagation(a);break;case 40:f.panBy(0,-5);f.stopPropagation(a);break;case 187:if(AMap.Util.isIE()){f._zoom("+");f.stopPropagation(a)}break;case 189:if(AMap.Util.isIE()){f._zoom("-");f.stopPropagation(a)}}})},_selectZoomEffect:function(a){this._lastTile=this._tile;var b=this.level-a;this._mouse.In||(this._mouse.x=this.width/2,this._mouse.y=this.height/2);var c=this._pixel2lnglat({x:this._relative.x+
this._mouse.x-this._lays.x,y:this._relative.y+this._mouse.y-this._lays.y},a);1==b&&this._mouse.In&&(this.center={lng:(this.center.lng+c.lng)/2,lat:(this.center.lat+c.lat)/2});-1==b&&this._mouse.In&&(this.center={lng:2*this.center.lng-c.lng,lat:2*this.center.lat-c.lat});var c=AMap.$("_mc_"+this._unique).children[0],d=AMap.$("_lay_"+this._unique+"_"+this._layers[0].id),e=AMap.$("_mc_"+this._unique).children[1];e.innerHTML=d.innerHTML;e.style.left=this._lays.x+"px";e.style.top=this._lays.y+"px";"WebkitTransform"in
document.documentElement.style?(e.style.WebkitTransform="scale(1)",e.style.WebkitTransformOrigin=this._mouse.x-this._lays.x+"px "+(this._mouse.y-this._lays.y)+"px"):"MozTransform"in document.documentElement.style?(e.style.MozTransform="scale(1)",e.style.MozTransformOrigin=this._mouse.x-this._lays.x+"px "+(this._mouse.y-this._lays.y)+"px"):"OTransform"in document.documentElement.style?(e.style.OTransform="scale(1)",e.style.OTransformOrigin=this._mouse.x-this._lays.x+"px "+(this._mouse.y-this._lays.y)+
"px"):"msTransform"in document.documentElement.style&&(e.style.msTransform="scale(1)",e.style.msTransformOrigin=this._mouse.x-this._lays.x+"px "+(this._mouse.y-this._lays.y)+"px");c.style.display="none";window.clearInterval(this._timer.lay);"WebkitTransform"in document.documentElement.style?this._transform("WebkitTransform",e,c,b):"MozTransform"in document.documentElement.style?this._transform("MozTransform",e,c,b):"OTransform"in document.documentElement.style?this._transform("OTransform",e,c,b):
"msTransform"in document.documentElement.style?this._transform("msTransform",e,c,b):this._zoomEffect(a,e,c,b)},_transform:function(a,b,c,d){var e=this,f=1,g=this._lays,d=1==d?1:-0.5,h=1==d?5:10;this._timer.lay=setInterval(function(){b.style[a]="scale("+(1+d*f/h)+")";b.style[a+"Origin"]=e._mouse.x-g.x+"px "+(e._mouse.y-g.y)+"px";f++;f>h&&(window.clearInterval(e._timer.lay),c.style.display="block")},30)},_zoomEffect:function(a,b,c,d){var e=this,f=this._relative,a=this._getTileNum(this._lnglat2pixel(this._mouse.lnglat,
a),{x:0,y:0}),g=AMap.Util.arraySearch(a.column+"."+a.line,this._lastTile),g=g?g:Math.floor(this._lastTile.length/2),h=this._mouse.x-e._lays.x-parseInt(b.children[g].style.left),j=this._mouse.y-e._lays.y-parseInt(b.children[g].style.top),k=0,o=1==d?64:-32,p=1==d?1:0.5;this._timer.lay=setInterval(function(){for(var a=e._lastTile[g].split("."),l=a[0],a=a[1],n=0;n<e._lastTile.length;n++){var q=o*k,v=h*d/3*k*p,w=j*d/3*k*p;b.children[n].style.width=b.children[n].style.height=256+q+"px";var m=e._lastTile[n].split("."),
r=m[0],m=m[1],s=256*r-f.x,t=256*m-f.y;r<=l?s-=Math.abs(l-r)*q+v:r>l&&(s+=Math.abs(l-r)*q-v);m<=a?t-=Math.abs(a-m)*q+w:m>a&&(t+=Math.abs(a-m)*q-w);b.children[n].style.left=Math.round(s)+"px";b.children[n].style.top=Math.round(t)+"px"}3<k&&(window.clearInterval(e._timer.lay),c.style.display="block");k++},100)}});
AMap.Overlays={renderer:!1,_addOverlay:function(a){this._overlays[a.id]&&this._removeOverlay(a.id);a._map=this;"marker"==a._type&&AMap.$("_mc_"+this._unique).children[0].appendChild(a._getHtmlDom());if("polyline"==a._type||"polygon"==a._type||"circle"==a._type)!1==this.renderer&&(this.renderer=AMap.Util.isIE()&&!AMap.Util.isIE9()?new AMap.Vml(this):new AMap.Svg(this)),this.renderer[a._type](a,this);a._bind_();this._overlays[a.id]=a},_removeOverlay:function(a){if(this._overlays[a]){var b=AMap.$(this._overlays[a].id);
b.parentNode.removeChild(b);this._overlays[a]=null;delete this._overlays[a]}},_reloadOverlays:function(){var a=[],b;for(b in this._overlays)a.push(this._overlays[b]),this._removeOverlay(this._overlays[b].id);for(b=0;b<a.length;b++)this._addOverlay(a[b])},_updateInfoWindow:function(){this._tip&&this._tip.getIsOpen()&&this._tip.updatePosition()},_clearInfoWindow:function(){var a=AMap.$("_mc_"+this._unique).children[2].children[0];a.style.visibility="hidden";a.innerHTML=""},clearInfoWindow:function(){this._tip=
null;delete this._tip;this._clearInfoWindow()}};AMap.Tween={Linear:function(a,b,c,d){return c*a/d+b},Cubic:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}}};
AMap.Util={error:function(){},getElementsById:function(a){return document.getElementById(a)},getElementsByClassName:function(a,b){for(var c=b.getElementsByTagName("*"),d=[],e=0;e<c.length;e++)c[e].className.match(RegExp("(\\s|^)"+a+"(\\s|$)"))&&d.push(c[e]);return d},isIE:function(){return/msie/i.test(navigator.userAgent)},isIE9:function(){return/msie 9.0/i.test(navigator.userAgent.toLowerCase())},isFirefox:function(){return navigator.userAgent.toLowerCase().match(/firefox\/([\d.]+)/)},getStyle:function(a){return a.currentStyle||
document.defaultView.getComputedStyle(a,null)},arraySearch:function(a,b){for(var c=0;c<b.length;c++)if(a==b[c])return c;return!1},fixPng:function(a){if(0!=a.width)a.outerHTML='<div style="filter:progid:DXImageTransform.Microsoft.Matrix(sizingmethod=\'auto expand\')"><span style="width:'+a.width+"px;height:"+a.height+"px;display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"',sizingMethod='scale');\"></span></div>";else{var b=new Image;b.src=a.src;a.outerHTML=
'<div style="filter:progid:DXImageTransform.Microsoft.Matrix(sizingmethod=\'auto expand\')"><span style="width:'+b.width+"px;height:"+b.height+"px;display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"',sizingMethod='scale');\"></span></div>"}},pageSize:function(a){return{width:a.clientWidth||document.body.clientWidth,height:a.clientHeight||(AMap.Util.isIE()?"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight:self.innerHeight)}},
guid:function(){return Math.round(1E5*Math.random())},test:function(a){var b="",c;for(c in a)if("object"==typeof a[c]){var b=b+("\u5c5e\u6027\uff1a'"+c+"' \u5b50\u5c5e\u6027\uff1a<br/>"),d=a[c],e;for(e in d)b+="--\u5c5e\u6027\uff1a '"+e+"' \u503c\uff1a"+d[e]+"<br>"}else b+="\u5c5e\u6027\uff1a'"+c+"' \u503c\uff1a"+a[c]+"<br>";document.getElementById("result")||(document.body.innerHTML+="<div id='result'></div>");document.getElementById("result").innerHTML=b+"<hr>"}};AMap.$=AMap.Util.getElementsById;
AMap.Svg=AMap.Class({_ns_svg:"http://www.w3.org/2000/svg",minX:0,minY:0,maxX:0,maxY:0,initialize:function(a){var b=document.createElementNS(this._ns_svg,"svg");b.setAttribute("id","ren_"+a._unique);b.setAttribute("version",1.1);b.style.position="absolute";b.setAttribute("viewBox","0 0 "+a.width+" "+a.height);b.style.width=a.width+"px";b.style.height=a.height+"px";b.style.left=0;b.style.top=0;b.style.zIndex=80;a=AMap.$("_mc_"+a._unique).children[0].children[1];a.parentNode.insertBefore(b,a)},canvas:function(a,
b,c){0==this.minX&&0==this.maxX&&0==this.minY&&0==this.maxY&&(this.minX=this.maxX=a,this.minY=this.maxY=b);this.minX=a<this.minX?a:this.minX;this.maxX=a>this.maxX?a:this.maxX;this.minY=b<this.minY?b:this.minY;this.maxY=b>this.maxY?b:this.maxY;c.style.left=this.minX-5+"px";c.style.top=this.minY-5+"px";c.style.width=this.maxX-this.minX+10+"px";c.style.height=this.maxY-this.minY+10+"px";c.setAttribute("viewBox",this.minX-5+" "+(this.minY-5)+" "+(this.maxX-this.minX+10)+" "+(this.maxY-this.minY+10))},
polyline:function(a,b){var c=AMap.$("ren_"+b._unique),d;d=document.createElementNS(this._ns_svg,"path");d.setAttribute("stroke-linjoin","round");d.setAttribute("stroke-linecap","round");d.setAttribute("pointer-events","visiblePainted");d.setAttribute("id",a.id);c.appendChild(d);this.polyline_path(a,b,d);this.polyline_style(a,b,d)},polyline_path:function(a,b,c){for(var c=c||AMap.$(a.id),d=[],e=180,f=-85,g=0;g<a.path.length;g++)if(a.path[g]&&a.path[g].lng&&a.path[g].lat){var h=b._lnglat2pixel(a.path[g],
b.level),j=h.x-b._relative.x,h=h.y-b._relative.y;d.push(j+","+h);this.canvas(j,h,c.parentNode);e=a.path[g].lng<e?a.path[g].lng:e;f=a.path[g].lat>f?a.path[g].lat:f}b=0<d.length?"M "+d.join(" "):"M 1,1";c.setAttribute("d",b);a._northwest=new AMap.LngLat(e,f)},polyline_style:function(a){var b=b||AMap.$(a.id);b.setAttribute("fill","none");b.setAttribute("stroke",a.strokeColor);b.setAttribute("stroke-width",a.strokeWeight+"px");b.setAttribute("stroke-opacity",a.strokeOpacity);b.setAttribute("stroke-dasharray",
"solid"==a.strokeStyle?[0,0,0]:a.strokeDasharray);b.style.display=a.visible?"block":"none"},polygon:function(a,b){var c=AMap.$("ren_"+b._unique),d;d=document.createElementNS(this._ns_svg,"path");d.setAttribute("id",a.id);d.setAttribute("stroke-linejoin","round");d.setAttribute("stroke-linecap","round");d.setAttribute("pointer-events","visiblePainted");c.appendChild(d);this.polygon_path(a,b,d);this.polygon_style(a,b,d)},polygon_path:function(a,b,c){for(var c=c||AMap.$(a.id),d=[],e=180,f=-85,g=0;g<
a.path.length;g++){var h=b._lnglat2pixel(a.path[g],b.level),j=h.x-b._relative.x,h=h.y-b._relative.y;d.push(j+","+h);this.canvas(j,h,c.parentNode);e=a.path[g].lng<e?a.path[g].lng:e;f=a.path[g].lat>f?a.path[g].lat:f}b=0<d.length?"M "+d.join(" ")+" z":"M 1,1 z";c.setAttribute("d",b);a._northwest=new AMap.LngLat(e,f)},polygon_style:function(a,b,c){c=c||AMap.$(a.id);c.setAttribute("fill",a.fillColor);c.setAttribute("fill-opacity",a.fillOpacity);c.setAttribute("stroke",a.strokeColor);c.setAttribute("stroke-width",
a.strokeWeight+"px");c.setAttribute("stroke-opacity",a.strokeOpacity);c.style.display=a.visible?"block":"none"},circle:function(a,b){var c=AMap.$("ren_"+b._unique),d;d=document.createElementNS(this._ns_svg,"circle");d.setAttribute("id",a.id);d.setAttribute("pointer-events","visiblePainted");c.appendChild(d);this.circle_position(a,b,d);this.circle_style(a,b,d)},circle_position:function(a,b,c){var c=c||AMap.$(a.id),d=b._lnglat2pixel(a.center,b.level),e=d.x-b._relative.x,f=d.y-b._relative.y;c.setAttribute("cx",
e);c.setAttribute("cy",f);var g=b._getLngLatByOffset(a.center,a.radius,0),g=b._lnglat2pixel(g,b.level),d=Math.abs(d.x-g.x);c.setAttribute("r",d);this.canvas(e-d,f-d,c.parentNode);this.canvas(e+d,f+d,c.parentNode);a._northwest=b._getLngLatByOffset(a.center,-a.radius,a.radius)},circle_style:function(a,b,c){c=c||AMap.$(a.id);c.setAttribute("fill",a.fillColor);c.setAttribute("fill-opacity",a.fillOpacity);c.setAttribute("stroke",a.strokeColor);c.setAttribute("stroke-width",a.strokeWeight+"px");c.setAttribute("stroke-opacity",
a.strokeOpacity);c.style.display=a.visible?"block":"none"}});
AMap.Vml=AMap.Class({_xmlns:"urn:schemas-microsoft-com:vml",vml:!1,initialize:function(a){document.namespaces.abc||document.namespaces.add("abc",this._xmlns);var b=document.createElement("abc:group");b.id="ren_"+a._unique;b.CoordSize=a.width+","+a.height;b.style.width=a.width+"px";b.style.height=a.height+"px";b.style.left="0px";b.style.top="0px";b.style.position="absolute";b.style.zIndex=80;b.unselectable="on";b.innerHTML='<v:shape style="Z-INDEX:1;POSITION:absolute;WIDTH:1px;HEIGHT:1px;BEHAVIOR:url(#default#VML)" coordsize="1,1" filled="f" stroked="t" strokecolor="red" strokeweight="0.5pt" path="m0,0 1,1 e"><v:stroke style="BEHAVIOR:url(#default#VML)" opacity="26214f" dashstyle="shortDash"></v:stroke></v:shape>';a=
AMap.$("_mc_"+a._unique).children[0].children[1];a.parentNode.insertBefore(b,a);this.vml=b},polyline:function(a,b){var c=this.vml||AMap.$("ren_"+b._unique),d;d=document.createElement("abc:shape");d.id=a.id;d.style.cssText="behavior:url(#default#VML);position:absolute;z-index:1;width:1px;height:1px;";d.coordsize="1,1";d.filled=!1;d.stroked=!0;this.polyline_path(a,b,d);this.polyline_style(a,b,d);c.appendChild(d)},polyline_path:function(a,b,c){for(var c=c||AMap.$(a.id),d=[],e=180,f=-85,g=0;g<a.path.length;g++){var h=
b._lnglat2pixel(a.path[g],b.level);d.push(h.x-b._relative.x+","+(h.y-b._relative.y));e=a.path[g].lng<e?a.path[g].lng:e;f=a.path[g].lat>f?a.path[g].lat:f}b=d[0];d.shift();c.path="m "+b+" l "+d.join(" ")+" e";a._northwest=new AMap.LngLat(e,f)},polyline_style:function(a,b,c){c=c||AMap.$(a.id);c.StrokeColor=a.strokeColor;c.StrokeWeight=a.strokeWeight+"px";b=c.children[0]||document.createElement("abc:stroke");b.style.cssText="behavior:url(#default#VML);";b.opacity=a.strokeOpacity;"solid"!=a.strokeStyle&&
(b.dashstyle="ShortDash");b.endcap="round";b.oned=!0;c.children[0]||c.appendChild(b);c.style.display=a.visible?"block":"none"},polygon:function(a,b){var c=this.vml||AMap.$("ren_"+b._unique),d;d=document.createElement("abc:shape");d.id=a.id;d.style.cssText="behavior:url(#default#VML);position:absolute;z-index:1;width:1px;height:1px;";d.coordsize="1,1";d.filled=!0;d.stroked=!0;c.appendChild(d);this.polygon_path(a,b,d);this.polygon_style(a,b,d)},polygon_path:function(a,b,c){for(var c=c||AMap.$(a.id),
d=[],e=180,f=-85,g=0;g<a.path.length;g++){var h=b._lnglat2pixel(a.path[g],b.level);d.push(h.x-b._relative.x+","+(h.y-b._relative.y));e=a.path[g].lng<e?a.path[g].lng:e;f=a.path[g].lat>f?a.path[g].lat:f}b=d[0];d.shift();c.path="m "+b+" l "+d.join(" ")+" x e";a._northwest=new AMap.LngLat(e,f)},polygon_style:function(a,b,c){c=c||AMap.$(a.id);c.FillColor=a.fillColor;c.StrokeColor=a.strokeColor;c.StrokeWeight=a.strokeWeight+"px";var b=c.children[0]||document.createElement("abc:stroke"),d=c.children[1]||
document.createElement("abc:fill");b.opacity=a.strokeOpacity;b.style.cssText="behavior:url(#default#VML);";d.opacity=a.fillOpacity;d.style.cssText="behavior:url(#default#VML);";c.children[0]||c.appendChild(b);c.children[1]||c.appendChild(d);c.style.display=a.visible?"block":"none"},circle:function(a,b){var c=this.vml||AMap.$("ren_"+b._unique),d;d=document.createElement("abc:oval");d.id=a.id;d.style.cssText="behavior:url(#default#VML);z-index:1000;position:absolute";d.filled=!0;d.stroked=!0;c.appendChild(d);
this.circle_position(a,b,d);this.circle_style(a,b,d)},circle_position:function(a,b,c){var c=c||AMap.$(a.id),d=b._lnglat2pixel(a.center,b.level),e=b._getLngLatByOffset(a.center,a.radius,0),e=b._lnglat2pixel(e,b.level),e=Math.abs(d.x-e.x);c.style.width=2*e+"px";c.style.height=2*e+"px";var f=d.x-b._relative.x;c.style.top=d.y-b._relative.y-e+"px";c.style.left=f-e+"px";a._northwest=b._getLngLatByOffset(a.center,-a.radius,a.radius)},circle_style:function(a,b,c){c=c||AMap.$(a.id);c.StrokeColor=a.strokeColor;
c.StrokeWeight=a.strokeWeight+"px";c.FillColor=a.fillColor;b=document.createElement("abc:stroke");b.style.cssText="behavior:url(#default#VML);";b.opacity=a.strokeOpacity;c.appendChild(b);b=document.createElement("abc:fill");b.style.cssText="behavior:url(#default#VML);";b.opacity=a.fillOpacity;c.appendChild(b);c.style.display=a.visible?"block":"none"}});
AMap.Circle=AMap.Class({_type:"circle",id:0,_originalLevel:0,center:{},radius:100,strokeColor:"#BDBDBD",strokeOpacity:0.9,strokeWeight:2,fillColor:"#F8F8F8",fillOpacity:0.8,editable:!1,visible:!0,_northwest:!1,initialize:function(a){for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);return this},setCenter:function(a){this.center=a;this._map.renderer[this._type+"_position"](this,this._map);this._map._trigger(this,"change",this)},getBounds:function(){var a=this._map,b=a._getLngLatByOffset(this.center,
-this.radius,this.radius),a=a._getLngLatByOffset(this.center,this.radius,-this.radius);return new AMap.Bounds(b,a)},getCenter:function(){return this.center},setRadius:function(a){this.radius=a;this._map.renderer[this._type+"_position"](this,this._map);this._map._trigger(this,"change",this)},getRadius:function(){return this.radius},hide:function(){this.visible=!1;AMap.$(this.id).style.display="none";this._map._trigger(this,"hide",this)},show:function(){this.visible=!0;AMap.$(this.id).style.display=
"block";this._map._trigger(this,"show",this)},setEditable:function(a){this.editable=a;obj._trigger(this,"change",this)},getEditable:function(){return this.editable},setOptions:function(a){for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);this._map.renderer[this._type+"_style"](this,this._map);this._map._trigger(this,"change",this)},getOptions:function(){var a={},b;for(b in this)"_"!=b.substr(0,1)&&"function"!=typeof this[b]&&(a[b]=this[b]);return a},_getLayer:function(a,b){var c=
AMap.$("_mc_"+this._map._unique).children[0],d=this._map,e={x:0,y:0};if(d.isIE&&!d.isIE9||d.isOpera){var f=d._lnglat2pixel(this._northwest,d.level);e.x=parseInt(c.style.left)+f.x-d._relative.x+b.offsetX;e.y=parseInt(c.style.top)+f.y-d._relative.y+b.offsetY-2}else d.isIE9?(e.x=parseInt(c.style.left)+b.offsetX,e.y=parseInt(c.style.top)+b.offsetY):(e.x=parseInt(c.style.left)+parseInt(a.parentNode.style.left)+(b.layerX||b.offsetX),e.y=parseInt(c.style.top)+parseInt(a.parentNode.style.top)+(b.layerY||
b.offsetY));return e},_bind_:function(){for(var a=AMap.$(this.id),b=this._map,c=this,d="click,dblclick,mouseover,mouseout,mousemove,mousedown,mouseup".split(","),e=0;e<d.length;e++)b.addEvent(a,d[e],function(d){var e=c._getLayer(a,d);d.layerX=e.x;d.layerY=e.y;d.lnglat=b._layer2lnglat(e);b._trigger(c,d.type,d)});b.addEvent(a,"contextmenu",function(d){var e=c._getLayer(a,d);d.layerX=e.x;d.layerY=e.y;d.lnglat=b._layer2lnglat(e);b._trigger(c,"rightclick",d);b.stopPropagation(d)})}});
AMap.ContextMenu=AMap.Class({_type:"contextmenu",_contextmenu:{},_map:{},position:{},isCustom:!1,content:"",textItem:[],width:190,className:"mc_menu",initialize:function(a){for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);return this},_getHtmlDom:function(){var a=this.textItem.sort(function(a,b){return a.so-b.so}),b=document.createElement("ul");b.style.cssText="margin:0; padding:0;list-style-type:none;";for(var c=0;c<a.length;c++){var d=document.createElement("li");d.style.cssText=
"text-indent:0.5em;cursor:pointer;height:20px;line-height:20px;word-break:break-all;";d.innerHTML=a[c].text;d.onclick=a[c].fn;d.so=a[c].so;d.onmouseover=function(){this.style.backgroundColor="#F3F3EE"};d.onmouseout=function(){this.style.backgroundColor=""};b.appendChild(d)}d=document.createElement("li");d.innerHTML="JavaScript API v1.0 &copy; Amap";d.onclick=function(){window.open("http://www.amap.com")};d.so=9999;d.style.cssText="font-family:'\u5fae\u8f6f\u96c5\u9ed1';font-size:12px;border-top:#ccc solid 1px;padding:2px 0;text-indent:0.5em;";
b.appendChild(d);return b},open:function(a,b){this._map=a;this._contextmenu=AMap.$("_mc_"+this._map._unique).children[0].children[0];this._contextmenu.innerHTML="";!1==this.isCustom?this._contextmenu.appendChild(this._getHtmlDom()):this._contextmenu.innerHTML=this.content;this._contextmenu.className=this.className;this._contextmenu.style.display="block";this._contextmenu.style.width=this.width+"px";var c=this._map._lnglat2pixel(b,this._map.level),d=c.x-this._map._relative.x,c=c.y-this._map._relative.y;
d+this._contextmenu.offsetWidth>this._map.width&&(d-=this.width);c+this._contextmenu.offsetHeight>this._map.height&&(c-=this._contextmenu.offsetHeight);this._contextmenu.style.left=d+"px";this._contextmenu.style.top=c+"px";var e=this;this._map.addEvent(document,"click",function(){e.close()});this._map._trigger(this,"open",this)},close:function(){this._contextmenu.style.display="none";this._contextmenu.innerHTML="";this._map._trigger(this,"close",this)},addItem:function(a,b,c){if(!a||!b)return!1;void 0==
c&&(c=0);this.textItem.push({text:a,fn:b,so:c});return!0},removeItem:function(a,b){if(!a||!b)return!1;for(var c=0;c<this.textItem.length;c++)if(this.textItem[c].text==a&&this.textItem[c].fn.toString()==b.toString())return this.textItem.splice(c,1),!0;return!1},clear:function(){this.textItem=[]},setClassName:function(){this._contextmenu.className=this.className},getClassName:function(){return this.className}});
AMap.Icon=AMap.Class({_type:"icon",size:{width:20,height:24},imageOffset:{x:0,y:0},image:"Images/marker_sprite.png",initialize:function(a){this.image=AMap.Conf._client+this.image;for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);return this},_getHtmlDom:function(){var a=document.createElement("div");a.style.cssText="width:"+this.size.width+"px;height:"+this.size.height+"px;overflow:hidden";var b=document.createElement("img");b.style.cssText="position:relative;left:"+this.imageOffset.x+
"px;top:"+this.imageOffset.y+"px;cursor:pointer";b.src=this.image;window.ActiveXObject&&!window.XMLHttpRequest&&(b.onload=function(){AMap.Util.fixPng(this)});a.appendChild(b);return a}});
AMap.InfoWindow=AMap.Class({_type:"inforwindow",_map:!1,isCustom:!1,position:{},content:"",offset:{x:55,y:0},align:AMap.Align.BOTTOM_CENTER,size:{width:300,height:0},isOpen:!1,autoMove:!1,initialize:function(a){for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);window.ActiveXObject&&!window.XMLHttpRequest&&"undefined"==typeof DD_belatedPNG&&new AMap.AjaxRequest(AMap.Conf._plugin+"?cls=iepngfix",function(){},!0);return this},_getHtmlDom:function(){if(!1==this.isCustom){var a=document.createDocumentFragment(),
b=document.createElement("div");b.style.cssText="height:8px; position:relative;z-index:104;overflow:hidden;";var c=[];c.push('<div style="width:8px;height:8px;background:url('+this._map._client+'Images/bg.png) -207px -17px;position:absolute;left:0;top:0;overflow:hidden;"></div>');c.push('<div style="position:relative;height:7px;border-top:#BDBDBD solid 1px;margin:0px 8px 1px 8px;background-color:#F8F8F8;overflow:hidden;"></div>');c.push('<div style="width:8px;height:8px;background:url('+this._map._client+
'Images/bg.png) -213px -17px;position:absolute;right:0;top:0;overflow:hidden;"></div>');b.innerHTML=c.join("");a.appendChild(b);b=document.createElement("div");b.style.cssText='padding:0 20px 0 2px;border-left:#BDBDBD solid 1px;border-right:#BDBDBD solid 1px; background-color:#F8F8F8;height:auto;word-break:break-all;font-family:"\u5fae\u8f6f\u96c5\u9ed1";font-size:12px;overflow:hidden;';0==this.size.height?b.style.width=this.size.width-24+"px":(b.style.width=this.size.width-24+"px",b.style.height=
this.size.height-16+"px");b.innerHTML=this.content;a.appendChild(b);b=document.createElement("div");b.style.cssText="height:8px;position:relative;z-index:104;";c=[];c.push('<div style="width:8px;height:8px;background:url('+this._map._client+'Images/bg.png) -207px -23px;position:absolute;left:0;top:0;overflow:hidden;"></div>');c.push('<div style="height:7px;border-bottom:#BDBDBD solid 1px;margin:0px 8px;background-color:#F8F8F8;overflow:hidden;"></div>');c.push('<div style="width:8px;height:8px;background:url('+
this._map._client+'Images/bg.png) -213px -23px;position:absolute;right:0;top:0;overflow:hidden;"></div>');b.innerHTML=c.join("");a.appendChild(b);b=document.createDocumentFragment();c=Math.ceil((this.size.width||this._inforwindow.clientWidth)/2)-6;for(i=0;6>i;i++){var d=document.createElement("div");d.style.cssText="position:relative;height:8px;z-index:105;border:none;overflow:hidden;";d.style.backgroundImage="url("+this._map._client+"Images/bg.png)";d.style.backgroundPosition="-"+(284-7*i)+"px -"+
(1+7*i)+"px";d.style.width=52-7*i+"px";d.style.left=c-8*i+"px";d.style.top="-1px";d.className="tip_mapabc";b.appendChild(d)}a.appendChild(b);b=document.createElement("img");b.style.cssText="position:absolute;top:8px;right:8px;z-index:500;width:14px;height:14px;background:url("+this._map._client+"Images/bg.png) -226px -0px;cursor:pointer;";b.src=this._map._client+"Images/blank.gif";b.alt="close";var e=this;AMap.Event.addEvent(b,"click",function(){e.close()});a.appendChild(b);return a}return this.content},
open:function(a,b){this._map=a;this.position=b;this._inforwindow=AMap.$("_mc_"+this._map._unique).children[2].children[0];for(var c=this._inforwindow.children;0<c.length;)this._inforwindow.removeChild(c[0]);this.isCustom&&(this._inforwindow.style.height=0<this.size.height?this.size.height+"px":"",this._inforwindow.style.width=0<this.size.width?this.size.width+"px":"");c=this._getHtmlDom();"object"==typeof c?(this._inforwindow.appendChild(c),"undefined"!=typeof DD_belatedPNG&&DD_belatedPNG.fix(".tip_mapabc")):
this._inforwindow.innerHTML=c;this.updatePosition()},updatePosition:function(){var a=this._map,b=this._map._lnglat2pixel(this.position,this._map.level),c=this,d=function(){if(c.autoMove){var b=a._lays.x+parseInt(c._inforwindow.style.left),d=a._lays.y+parseInt(c._inforwindow.style.top),g=0,h=0;0>b?g=-b+5:b+c.size.width>a.width&&(g=a.width-c.size.width-b-5);b=(c.size.height||c._inforwindow.clientHeight)+47;0>d?h=-d+5:d+b>=a.height&&(h=a.height-d-b-5);a.panBy(g,h)}setTimeout(function(){c._inforwindow.style.visibility=
"visible"},40);c.isOpen=!0;c._bind_();a._trigger(c,"open",c);a._tip=c};setTimeout(function(){c._inforwindow.style.width=(c.size.width||c._inforwindow.clientWidth)+"px";this.isCustom&&(c._inforwindow.style.height=(c.size.height||c._inforwindow.clientHeight)+"px");var e=c.offset.x,f=c.offset.y,g=c._inforwindow.clientWidth,h=c._inforwindow.clientHeight;switch(c.align){case AMap.Align.TOP_CENTER:e-=g/2;break;case AMap.Align.BOTTOM_CENTER:e-=g/2,f-=h}c._inforwindow.style.left=b.x-a._relative.x+e+"px";
c._inforwindow.style.top=b.y-a._relative.y+f+"px";a.panBy(1,0);a.panBy(-1,0);d()},1)},close:function(){this._inforwindow.style.visibility="hidden";for(var a=this._inforwindow.children;0<a.length;)this._inforwindow.removeChild(a[0]);this.isOpen=!1;this._map&&this._map._trigger(this,"close",this);a=this._map;a._tip=null;delete a._tip},getIsOpen:function(){return this.isOpen},setIsCustom:function(a){this.isCustom=a;this._map&&this._map._trigger(this,"change",this)},getIsCustom:function(){return this.isCustom},
setOffset:function(a){this.offset=a;this._map&&(this._map._trigger(this,"change",this),this.open(this._map,this.position))},getOffset:function(){return this.offset},setContent:function(a){this.content=a;this._map&&(this._map._trigger(this,"change",this),this.open(this._map,this.position))},getContent:function(){return this.content},setPosition:function(a){this.position=a;this._map&&(this._map._trigger(this,"change",this),this.open(this._map,this.position))},getPosition:function(){return this.position},
setSize:function(a){this.size=a;this._map&&(this._map._trigger(this,"change",this),this.open(this._map,this.position))},getSize:function(){return this.size},_bind_:function(){for(var a=this._map,b=this._inforwindow,c=["dblclick","contextmenu"],d=0;d<c.length;d++)a.addEvent(b,c[d],function(b){a.stopPropagation(b)})}});
AMap.Marker=AMap.Class({_type:"marker",_map:!1,id:!1,position:{},zIndex:0,icon:AMap.Conf._client+"Images/marker_sprite.png",content:"",offset:{x:0,y:0},draggable:!1,cursor:!1,autoRotation:!0,visible:!0,initialize:function(a){for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);return this},_getHtmlDom:function(){var a=this._map,b=document.createElement("div");this.id=b.id=this.id||"_mkr_"+AMap.Util.guid();b.style.cssText="position:absolute;z-index:150;";this.cursor&&(b.style.cursor=
"url("+this.cursor+"),pointer");this.visible||(b.style.display="none");if(""!=this.content)"object"==typeof this.content?b.appendChild(this.content):b.innerHTML=this.content;else if("string"==typeof this.icon){var c=[];a.isIE&&!a.isIE9&&-1<this.icon.toLocaleLowerCase().indexOf(".png")?c.push('<img src="'+this.icon+'" style="cursor:hand;border:none;" onload="AMap.Util.fixPng(this)"/>'):c.push('<img src="'+this.icon+'" style="cursor:hand;cursor:pointer;border:none;"/>');b.innerHTML=c.join("")}else b.appendChild(this.icon._getHtmlDom());
c=a._lnglat2pixel(this.position,a.level);b.style.left=c.x-a._relative.x+this.offset.x+"px";b.style.top=c.y-a._relative.y+this.offset.y+"px";return this._dom=b},setPosition:function(a){var b=document.getElementById(this.id),a=this._map._lnglat2pixel(a,this._map.level);b.style.left=a.x-this._map._relative.x+this.offset.x+"px";b.style.top=a.y-this._map._relative.y+this.offset.y+"px"},getPosition:function(){var a=document.getElementById(this.id),b={};b.x=parseInt(a.style.left)+this._map._relative.x-this.offset.x;
b.y=parseInt(a.style.top)+this._map._relative.y-this.offset.y;return this.position=this._map._pixel2lnglat(b,this._map.level)},setIcon:function(a){var b=this._map;if(!this.content){var c=document.getElementById(this.id);this.icon=a;if("string"==typeof this.icon)a=[],b.isIE&&!b.isIE9&&-1<this.icon.toLocaleLowerCase().indexOf(".png")?a.push('<img src="'+this.icon+'" style="cursor:pointer;border:none;" onload="AMap.Util.fixPng(this)"/>'):b.isIE&&a.push('<img src="'+this.icon+'" style="cursor:pointer;cursor:hand;border:none;"/>'),
c.innerHTML=a.join("");else{for(b=c.getElementsByTagName("*");0<b.length;)c.removeChild(b[0]);c.appendChild(this.icon._getHtmlDom())}return!0}return!1},getIcon:function(){return this.icon},setDraggable:function(a){this.draggable=a},getDraggable:function(){return this.draggable},setVisible:function(a){var b=document.getElementById(this.id);this.visible=a;b.style.display=a?"block":"none"},getVisible:function(){return this.visible},setCursor:function(a){this._dom.style.cursor="url("+a+"),pointer";this.cursor=
a},getCursor:function(){return this.cursor},setContent:function(a){this.content=a;a=document.getElementById(this.id);"object"==typeof this.content?a.appendChild(this.content):a.innerHTML=this.content},getContent:function(){return this.content},moveTo:function(a,b,c){var d=this,e=this._map,f=this._dom,g=0,h=e._lnglat2pixel(d.getPosition(),e.level),j=e._lnglat2pixel(a,e.level),k=j.x-h.x,o=j.y-h.y;Math.sqrt(Math.pow(k,2)+Math.pow(o,2));var p=parseInt(f.style.left),u=parseInt(f.style.top),l=Math.round(3.6*
e._getDistance(a,d.getPosition())/b);if(0==l)return f.style.left=p+k+"px",f.style.top=u+o+"px",e._trigger(d,"moveend",d),!1;c=c||AMap.Tween.Linear;d._timer&&window.clearInterval(d._timer);d._timer=setInterval(function(){g++;var a=c(g,p,k,l),b=c(g,u,o,l);try{f.style.left=a+"px",f.style.top=b+"px"}catch(j){}g>=l&&(f.style.left=p+k+"px",f.style.top=u+o+"px",window.clearInterval(d._timer),e._trigger(d,"moveend",d));e._trigger(d,"moving",d)},40);this.autoRotation&&this._rotate(f,this._getRotation(h,j))},
moveAlong:function(a,b,c,d){var e=this,f=this._map,g=1;e.setPosition(a[0]);f.bind(this,"moveend",function(){g++;g<a.length?e.moveTo(a[g],b,c):(f._trigger(e,"movealong",e),d&&(f._trigger(e,"movealong",e),g=1,e.setPosition(a[0]),e.moveTo(a[1],b,c)))});f.bind(f,"zoomchange",function(){e._timer&&window.clearInterval(e._timer);1<g?e.setPosition(a[g-1]):e.setPosition(a[0]);g<a.length&&e.moveTo(a[g],b,c)});e.moveTo(a[1],b,c)},stopMove:function(){this._timer&&window.clearInterval(this._timer)},_getRotation:function(a,
b){var c=0;Math.sqrt(Math.pow(b.y-a.y,2)+Math.pow(b.x-a.x,2));var d=b.y-a.y,e=b.x-a.x;0!=b.x-a.x?(c=Math.atan((b.y-a.y)/(b.x-a.x)),0<=d&&0>e?c=Math.PI+c:0>d&&0>=e?c=Math.PI+c:0>d&&0<=e&&(c=2*Math.PI+c)):c=b.y>a.y?Math.PI/2:3*Math.PI/2;return(180*c/Math.PI).toFixed(1)},_rotate:function(a,b){var c=0,d=0;if(AMap.Util.isIE()&&!AMap.Util.isIE9()){a.style.filter='progid:DXImageTransform.Microsoft.Matrix(sizingmethod="auto expand")';var d=Math.cos(b*Math.PI/180),c=Math.sin(b*Math.PI/180),e=a.filters.item(0);
e.M11=e.M22=d;e.M12=-(e.M21=c)}else"MozTransform"in document.documentElement.style?a.style.MozTransform="rotate("+b+"deg)":"OTransform"in document.documentElement.style?a.style.OTransform="rotate("+b+"deg)":"WebkitTransform"in document.documentElement.style?a.style.webkitTransform="rotate("+b+"deg)":"msTransform"in document.documentElement.style?a.style.msTransform="rotate("+b+"deg)":a.style.transform="rotate("+b+"deg)"},_bind_:function(){var a=document.getElementById(this.id),b=this,c=this._map;
c.addEvent(a,"mousemove",function(a){a.lnglat=b.getPosition();c._trigger(b,"mousemove",a)});c.addEvent(a,"mouseover",function(a){a.lnglat=b.getPosition();c._trigger(b,"mouseover",a)});c.addEvent(a,"mouseout",function(a){a.lnglat=b.getPosition();c._trigger(b,"mouseout",a)});c.addEvent(a,"dblclick",function(a){c._trigger(b,"dblclick",a)});c.addEvent(a,"mousedown",function(a){a.lnglat=b.getPosition();c._trigger(b,"mousedown",a)});c.addEvent(a,"mouseup",function(a){a.lnglat=b.getPosition();c._trigger(b,
"mouseup",a)});var d=0,e=0,f=0,g=0,h=0;c.drag(a,function(a){h=0;c._clearInfoWindow();d=parseInt(a.clientX);e=parseInt(a.clientY);a.lnglat=b.getPosition();window.clearTimeout(g);g=setTimeout(function(){1==h&&c._trigger(b,"dragstart",a)},100);c.stopPropagation(a)},function(f){b.draggable&&(h=1,AMap.$(b.id),a.style.left=parseInt(a.style.left)+f.clientX-d+"px",a.style.top=parseInt(a.style.top)+f.clientY-e+"px",d=f.clientX,e=f.clientY);f.lnglat=b.getPosition();c._trigger(b,"dragging",f);c.stopPropagation(f)},
function(a){a.lnglat=b.getPosition();window.clearTimeout(f);f=setTimeout(function(){0==h?c._trigger(b,"click",a):c._trigger(b,"dragend",a);h=0},40);c.stopPropagation(a)});c.addEvent(a,"contextmenu",function(a){c._trigger(b,"rightclick",a);c.stopPropagation(a)})}});
AMap.Polygon=AMap.Class({_type:"polygon",_map:!1,id:AMap.Util.guid(),path:[],strokeColor:"#BDBDBD",strokeOpacity:0.9,strokeWeight:2,fillColor:"#F8F8F8",fillOpacity:0.8,editable:!1,visible:!0,_northwest:!1,initialize:function(a){for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);return this},setPath:function(a){this.path=a;this._map.renderer[this._type+"_path"](this,this._map);this._map._trigger(this,"change",this)},getPath:function(){return this.path},setOptions:function(a){for(var b in a)"_"!=
b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);if(a.path)this._map.renderer[this._type+"_path"](this,this._map);this._map.renderer[this._type+"_style"](this,this._map);this._map._trigger(this,"change",this)},getOptions:function(){var a={},b;for(b in this)"_"!=b.substr(0,1)&&"function"!=typeof this[b]&&(a[b]=this[b]);return a},hide:function(){this.visible=!1;AMap.$(this.id).style.display="none";this._map._trigger(this,"hide",this)},show:function(){this.visible=!0;AMap.$(this.id).style.display="block";
this._map._trigger(this,"show",this)},setEditable:function(a){this.editable=a;this._map._trigger(this,"change",this)},getEditable:function(){return this.editable},_getLayer:function(a,b){var c=AMap.$("_mc_"+this._map._unique).children[0],d=this._map,e={x:0,y:0};if(d.isIE&&!d.isIE9||d.isOpera){var f=d.isOpera?2:4,g=d.isOpera?5:9,h=d._lnglat2pixel(this._northwest,d.level);e.x=parseInt(c.style.left)+h.x-d._relative.x+b.offsetX-f;e.y=parseInt(c.style.top)+h.y-d._relative.y+b.offsetY-g}else d.isIE9?(e.x=
parseInt(c.style.left)+b.offsetX,e.y=parseInt(c.style.top)+b.offsetY):(e.x=parseInt(c.style.left)+parseInt(a.parentNode.style.left)+(b.layerX||b.offsetX),e.y=parseInt(c.style.top)+parseInt(a.parentNode.style.top)+(b.layerY||b.offsetY));return e},_bind_:function(){for(var a=AMap.$(this.id),b=this._map,c=this,d="click,dblclick,mouseover,mouseout,mousemove,mousedown,mouseup".split(","),e=0;e<d.length;e++)b.addEvent(a,d[e],function(d){var e=c._getLayer(a,d);d.layerX=e.x;d.layerY=e.y;d.lnglat=b._layer2lnglat(e);
b._trigger(c,d.type,d)});b.addEvent(a,"contextmenu",function(d){var e=c._getLayer(a,d);d.layerX=e.x;d.layerY=e.y;d.lnglat=b._layer2lnglat(e);b._trigger(c,"rightclick",d);b.stopPropagation(d)})}});
AMap.Polyline=AMap.Class({_type:"polyline",_map:null,id:0,path:[],strokeColor:"#BDBDBD",strokeOpacity:0.9,strokeWeight:2,strokeStyle:"solid",strokeDasharray:[10,5],editable:!1,visible:!0,_northwest:!1,initialize:function(a){for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);return this},setPath:function(a){this.path=a;this._map.renderer[this._type+"_path"](this,this._map);this._map._trigger(this,"change",this)},getPath:function(){return this.path},setOptions:function(a){for(var b in a)"_"!=
b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);if(a.path)this._map.renderer[this._type+"_path"](this,this._map);this._map.renderer[this._type+"_style"](this,this._map);this._map._trigger(this,"change",this)},getOptions:function(){var a={},b;for(b in this)"_"!=b.substr(0,1)&&"function"!=typeof this[b]&&(a[b]=this[b]);return a},hide:function(){this.visible=!1;AMap.$(this.id).style.display="none";this._map._trigger(this,"hide",this)},show:function(){AMap.$(this.id).style.display="block";this.visible=
!0;this._map._trigger(this,"show",this)},setEditable:function(a){this.editable=a;this._map._trigger(this,"change",this)},getEditable:function(){return this.editable},_getLayer:function(a,b){var c=AMap.$("_mc_"+this._map._unique).children[0],d=this._map,e={x:0,y:0};if(d.isIE&&!d.isIE9||d.isOpera){var f=d.isOpera?1:2,g=d._lnglat2pixel(this._northwest,d.level);e.x=parseInt(c.style.left)+g.x-d._relative.x+b.offsetX-f;e.y=parseInt(c.style.top)+g.y-d._relative.y+b.offsetY-2}else d.isIE9?(e.x=parseInt(c.style.left)+
b.offsetX,e.y=parseInt(c.style.top)+b.offsetY):(e.x=parseInt(c.style.left)+parseInt(a.parentNode.style.left)+(b.offsetX||b.layerX),e.y=parseInt(c.style.top)+parseInt(a.parentNode.style.top)+(b.offsetY||b.layerY));return e},_bind_:function(){for(var a=AMap.$(this.id),b=this._map,c=this,d="click,dblclick,mouseover,mouseout,mousemove,mousedown,mouseup".split(","),e=0;e<d.length;e++)b.addEvent(a,d[e],function(d){var e=c._getLayer(a,d);d.layerX=e.x;d.layerY=e.y;d.pixel=e;d.lnglat=b._layer2lnglat(e);b._trigger(c,
d.type,d)});b.addEvent(a,"contextmenu",function(d){var e=c._getLayer(a,d);d.layerX=e.x;d.layerY=e.y;d.pixel=e;d.lnglat=b._layer2lnglat(e);b._trigger(c,"rightclick",d)})}});AMap.MAjaxResult={};
AMap.AjaxRequest=function(a,b,c){var d=Math.round(1E6*Math.random()),e=document.getElementById("MAjax_"+d);e&&document.getElementsByTagName("head")[0].removeChild(e);e=document.createElement("script");e.id="MAjax_"+d;e.type="text/javascript";e.src=a+"&rid="+d;document.getElementsByTagName("head")[0].appendChild(e);var f=this;AMap.Util.isIE()&&!AMap.Util.isIE9()?e.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&f.ajaxResult()}:(e.onload=function(){f.ajaxResult()},
e.onerror=function(){if(c)try{document.getElementsByTagName("head")[0].removeChild(e)}catch(a){}else f.ajaxResult()});this.ajaxResult=function(){if(AMap.MAjaxResult[d]){b&&b(AMap.MAjaxResult[d]);document.getElementsByTagName("head")[0].removeChild(document.getElementById("MAjax_"+d));AMap.MAjaxResult[d]=null;delete AMap.MAjaxResult[d]}else if(c)b&&b();else{try{document.getElementsByTagName("head")[0].removeChild(e)}catch(a){}b&&b({status:"NE",state:"404"})}}};
AMap.BusSearch=AMap.Class({_type:"bussearch",_url:"",initialize:function(a){var a=a||{},b={encode:"utf-8",_resType:"json",per:"",batch:1,number:10,retvalue:1},c="&",d;for(d in b)b[d]&&(c+=d.replace("_","")+"="+encodeURI(a[d.replace("_","")]||b[d])+"&");this._url=AMap.Conf._server+"bus/simple?key="+AMap.Conf._key+c},byBusId:function(a,b,c){a instanceof Array&&(a=a.join(","));a=this._url+"sid=8085&ids="+a+"&city="+encodeURI(b);new AMap.AjaxRequest(a,c)},byBusName:function(a,b,c){a=this._url+"sid=8004&busName="+
encodeURI(a)+"&city="+encodeURI(b);new AMap.AjaxRequest(a,c)},byBusStation:function(a,b,c){a=this._url+"sid=8086&stationName="+encodeURI(a)+"&city="+encodeURI(b);new AMap.AjaxRequest(a,c)},byTwoPoi:function(a,b,c,d){for(var e=[],f=0;f<a.length;f++)e.push(a[f].toString());a=this._url+"sid=8001&xys="+e.join(";")+"&city="+encodeURI(b)+"&routeType="+(d||0);new AMap.AjaxRequest(a,c)}});
AMap.Geocoder=AMap.Class({_type:"geocoder",initialize:function(a){var a=a||{},b={_resType:"json",encode:"utf-8",range:3E3,roadnum:10,crossnum:3,poinum:10,retvalue:1},c="&",d;for(d in b)b[d]&&(c+=d.replace("_","")+"="+encodeURI(a[d.replace("_","")]||b[d])+"&");this._url=c},geocode:function(a,b){var c=AMap.Conf._server+"geocode/simple?key="+AMap.Conf._key+this._url+"sid=7000&address="+encodeURI(a);new AMap.AjaxRequest(c,b)},regeocode:function(a,b){new AMap.AjaxRequest(AMap.Conf._server+"rgeocode/simple?key="+
AMap.Conf._key+this._url+"sid=7001&region="+a.toString(),b)}});
AMap.Partition=AMap.Class({_type:"partition",_url:"",initialize:function(a){var a=a||{},b={encode:"utf-8",srctype:"",type:"",number:10,batch:1,range:3E3,ext:"",_resType:"json",retvalue:1},c="&",d;for(d in b)b[d]&&(c+=d.replace("_","")+"="+encodeURI(a[d.replace("_","")]||b[d])+"&");this._url=AMap.Conf._server+"gss/simple?key="+AMap.Conf._key+c},byProvince:function(a){new AMap.AjaxRequest(this._url+"sid=1022&region=116.39,39.51&maplevel=2",a)},byCity:function(a,b){var c=this._url+"sid=1021&city="+encodeURI(a);
new AMap.AjaxRequest(c,b)},byDistrict:function(a,b,c){a=this._url+"sid=1003&districtName="+encodeURI(a)+"&city="+encodeURI(b);new AMap.AjaxRequest(a,c)}});
AMap.PoiSearch=AMap.Class({_type:"poisearch",_url:"",initialize:function(a){var a=a||{},b={encode:"utf-8",srctype:"",type:"",number:10,batch:1,range:3E3,ext:"",_resType:"json",retvalue:1},c="&",d;for(d in b)b[d]&&(c+=d.replace("_","")+"="+encodeURI(a[d.replace("_","")]||b[d])+"&");this._url=AMap.Conf._server+"gss/simple?key="+AMap.Conf._key+c},byKeywords:function(a,b,c){a=this._url+"sid=1000&keyword="+encodeURI(a)+"&city="+encodeURI(b);new AMap.AjaxRequest(a,c)},byCenKeywords:function(a,b,c,d){a=
this._url+"sid=1001&cen="+encodeURI(b)+"&keyword="+encodeURI(a)+"&city="+encodeURI(c);new AMap.AjaxRequest(a,d)},byCenPoi:function(a,b,c){a=this._url+"sid=1002&cenX="+a.lng+"&cenY="+a.lat+"&keyword="+encodeURI(b);new AMap.AjaxRequest(a,c)},byPguid:function(a,b){new AMap.AjaxRequest(this._url+"sid=1006&pguid="+a,b)},byRegion:function(a,b,c){(!a||2>a.length)&&AMap.Util.error("AMap.PoiSearch.byRegion","region\u81f3\u5c11\u5305\u62ec2\u4e2a\u70b9");var d=[];if(2==a.length)d.push(a[0].lng+","+a[0].lat),
d.push(a[0].lng+","+a[1].lat),d.push(a[1].lng+","+a[1].lat),d.push(a[1].lng+","+a[0].lat);else for(var e=0;e<a.length;e++)d.push(a[e].lng+","+a[e].lat);a=this._url+"sid=1005&regionType=polygon&region="+d.join(";")+"&keyword="+encodeURI(b);new AMap.AjaxRequest(a,c)},inputPrompt:function(a,b,c){new AMap.AjaxRequest(this._url+"sid=1014&keyword="+a+"&city="+(b|0),c)}});
AMap.RoadSearch=AMap.Class({_type:"roadsearch",_url:"",initialize:function(a){var a=a||{},b={encode:"utf-8",_resType:"json",ext:"",batch:1,number:10,retvalue:1},c="&",d;for(d in b)b[d]&&(c+=d.replace("_","")+"="+encodeURI(a[d.replace("_","")]||b[d])+"&");this._url=AMap.Conf._server+"gss/simple?key="+AMap.Conf._key+c},roadInfoSearchByRoadName:function(a,b,c){a=this._url+"sid=1008&roadName="+encodeURI(a)+"&city="+encodeURI(b);new AMap.AjaxRequest(a,c)},roadCrossSearchByRoadName:function(a,b,c){a=this._url+
"sid=1010&roadName="+encodeURI(a)+"&city="+encodeURI(b);new AMap.AjaxRequest(a,c)},roadCrossSearchByRoadNames:function(a,b,c,d){a=this._url+"sid=1009&roadName1="+encodeURI(a)+"&roadName2="+encodeURI(b)+"&city="+encodeURI(c);new AMap.AjaxRequest(a,d)}});
AMap.RouteSearch=AMap.Class({_type:"routesearch",_url:"",initialize:function(a){var a=a||{},b={encode:"utf-8",_resType:"json",routeType:0,avoidType:"",avoidName:"",avoidRegion:[],per:"",retvalue:1},c="&",d;for(d in b)if(b[d])var e=a[d.replace("_","")]||b[d],e=e instanceof Array?e.join(";"):e,c=c+(d.replace("_","")+"="+encodeURI(e)+"&");this._url=AMap.Conf._server+"route/simple?key="+AMap.Conf._key+c},getNaviPath:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d].toString());c=this._url+"sid=8000&xys="+
c.join(";");new AMap.AjaxRequest(c,b)}});AMap.Bounds=AMap.Class({_type:"bounds",southwest:{},northeast:{},initialize:function(a,b){this.southwest=a;this.northeast=b}});AMap.LngLat=AMap.Class({_type:"lnglat",lng:0,lat:0,initialize:function(a,b){this.lng=parseFloat(a);this.lat=parseFloat(b)},toString:function(){return this.lng+","+this.lat}});AMap.Pixel=AMap.Class({_type:"pixel",x:0,y:0,initialize:function(a,b){this.x=Math.round(a);this.y=Math.round(b)},toString:function(){return this.x+","+this.y}});
AMap.Size=AMap.Class({_type:"size",width:0,height:0,initialize:function(a,b){this.width=Math.round(a);this.height=Math.round(b)}});
AMap.TileLayer=AMap.Class({_type:"tilelayer",id:"",tileUrl:AMap.Conf.mapUrl,tileSize:256,copyright:"",initialize:function(a){for(var b in a)"_"!=b.substr(0,1)&&void 0!=this[b]&&(this[b]=a[b]);return this},show:function(){},hide:function(){},getTileSize:function(){return this.tileSize},getTileUrl:function(a,b,c){var d=this.tileUrl||AMap.Conf.mapUrl,e=d.match(/\{.*\}/);if(e)var f=e.toString().replace("{","").replace("}",""),f=f.split(","),f=f[Math.abs(a+b)%f.length],d=d.replace(e,f);e=Math.pow(2,c);
a=0>a?e-Math.floor(Math.abs(a)%e):a;a=a>=e?Math.floor(a%e):a;return d.replace("[x]",a).replace("[y]",b).replace("[z]",c)}});
AMap.Map=AMap.Class(AMap.Conf,AMap.Event,AMap.Layerset,AMap.Overlays,AMap.Control,AMap.Interface,{version:"ajaxapi-v3.0-20110926",_type:"map",initialize:function(a,b){this._cursor={map:"default"};this.height=this.width=0;this.pixel={x:0,y:0};this._unique=0;this._relative={x:0,y:0};this.northwest={x:0,y:0};this.southeast={x:0,y:0};this.defaultTileLayer=new AMap.TileLayer({id:"base",tileUrl:this.mapUrl});this._lays={x:0,y:0};this._overlays={};this._event={map:[],marker:[],polyline:[],polygon:[],circle:[],
inforwindow:[],contextmenu:[]};(new Date).getMilliseconds();var b=b||{},c;for(c in b)"_"!=c.substr(0,1)&&void 0!=this[c]&&(this[c]=b[c]);if(a){"string"==typeof a&&(a=document.getElementById(a));this.container=a;this.width=AMap.Util.pageSize(a).width;this.height=AMap.Util.pageSize(a).height;this._unique=this.id=AMap.Util.guid();if(""==a.style.position&&"static"==(a.currentStyle||document.defaultView.getComputedStyle(a,null)).position)a.style.position="relative";c=[];c.push('<div class="mc_" id="_mc_'+
this._unique+'" style="position:relative;width:100%;height:100%;background-color:#F2F2EF;overflow:hidden;z-index:100;">');c.push('<div style="width:100%;height:100%;position:absolute;left:0;top:0;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;" unselectable="on">');c.push("<div style=\"font-size:12px;width:180px;position:absolute;z-index:1000;border:#ccc solid 1px;background-color:#fff;font-family:'\u5fae\u8f6f\u96c5\u9ed1'; display:none;\"></div>");c.push('<div id="_mask" style="position:absolute;width:100%;height:100%;left:0;top:0;"></div>');
c.push("</div>");c.push('<div style="position:absolute;left:0;top:0;z-index:-1;" unselectable="on"></div>');c.push('<div style="position:absolute;left:0;top:0;">');c.push('<div style="position:absolute;left:0;top:0;z-index:504;visibility:hidden;"></div>');c.push("</div>");c.push("</div>");c.push('<div id="_frame_'+this._unique+'" style="width:108px;height:73px;overflow:hidden;position:absolute;z-index:306;display:none;"></div>');c.push('<div id="_copyright_'+this._unique+'" style="width:auto;height:14px;line-height:14px;font-size:11px; font-family:Arial,sans-serif;white-space:nowrap;position:absolute;right:5px;bottom:0;z-index:305;">'+
this._copyright+"</div>");c.push('<div id="count'+this._unique+'"></div>');a.innerHTML=c.join("");this._initLayer();this._initControl();this._monitor();this._tileCount()}},_monitor:function(){function a(){var a=AMap.Util.pageSize(b.container);if(b.width!=a.width||b.height!=a.height)b.width=a.width,b.height=a.height,b._reloadLayer(),b._reloadOverlays(),b._updateInfoWindow(),b._trigger(b,"resize",b)}var b=this;AMap.Util.isIE()&&!AMap.Util.isIE9()?this.addEvent(this.container,"resize",a):this._resizetimer=
setInterval(a,1E3)},_tileCount:function(){var a=document.getElementById("count"+this._unique);if(this._count){var b=document.createElement("script");b.src=this._count+"?v="+this._version+"&k="+AMap.Conf._key+"&u="+window.location.href;b.onerror=function(){a.removeChild(b)};a.appendChild(b)}},_panBy:function(a,b){var c=AMap.$("_mc_"+this._unique),d=c.children[0],e=c.children[1],c=c.children[2];this._lays.x+=a;this._lays.y+=b;d.style.left=e.style.left=c.style.left=this._lays.x+"px";d.style.top=e.style.top=
c.style.top=this._lays.y+"px";d=AMap.$("_mask");d.style.left=-1*this._lays.x+"px";d.style.top=-1*this._lays.y+"px";this.northwest={x:this.northwest.x-a,y:this.northwest.y-b};this.southeast={x:this.southeast.x-a,y:this.southeast.y-b};this.pixel={x:this._relative.x+this.width/2-this._lays.x,y:this._relative.y+this.height/2-this._lays.y};this.center=this._pixel2lnglat(this.pixel,this.level);this._moveTile();this._trigger(this,"mapmove",{x:a,y:b})},_zoom:function(a){if(!this.zoomEnable)return!1;this._clearInfoWindow();
var b=this.level;"+"==a?(this.level++,this.level=this.level>=this.maxZoom?this.maxZoom:this.level):"-"==a?(this.level--,this.level=this.level<=this.minZoom?this.minZoom:this.level):a>=this.minZoom&&a<=this.maxZoom&&a!=this.level&&(this.level=a);1==Math.abs(this.level-b)&&this.continuousZoomEnable&&this._selectZoomEffect(b);0!=this.level-b&&this._frame(this.level-b);this._reloadLayer();this._reloadOverlays();this._trigger(this,"zoomchange",{lastLevel:b});if(this._tip){var c=this;setTimeout(function(){c._tip.open(c,
c._tip.position)},500)}this._lays={x:0,y:0}},_getLngLatByOffset:function(a,b,c){b=2*Math.asin(Math.sin(b/12756274)/Math.cos(a.lat*Math.PI/180));b=a.lng+180*b/Math.PI;c=2*Math.asin(c/12756274);return new AMap.LngLat(b,a.lat+180*c/Math.PI)},_layer2lnglat:function(a){var b=AMap.$("_mc_"+this._unique).children[0];return this._pixel2lnglat({x:this._relative.x+a.x-parseInt(b.style.left),y:this._relative.y+a.y-parseInt(b.style.top)},this.level)},_getDistance:function(a,b){var c=a.lat*Math.PI/180,d=b.lat*
Math.PI/180,e=(a.lng-b.lng)*Math.PI/180;return 12756274*Math.asin(Math.sqrt(Math.pow(Math.sin((c-d)/2),2)+Math.cos(c)*Math.cos(d)*Math.pow(Math.sin(e/2),2)))}});
